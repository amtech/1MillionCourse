



Redis cluster有局限，查询是在客户端，如果一次查询10个Key，mget需要落在一个主从上才可以做到。



为什么不用一致性哈希算法？

TiDB的协调器也是基于Raft协议



业务线程假死，Etcd client ttl线程还在跑，怎么办？



线上分布式锁最长10s。



补偿方法是有要重试的。



线程共享通过threadLocal，进程共享rpc字段



给一个字符串，转成12345。 valueOf, parseInt



熔断之后，会先返回给用户信息，然后悄悄的去尝试是否恢复了。如果尝试成功，也只是为了探测用，不会返回用户。如果熔断的是写请求，那业务可能会出问题，如果是读请求而没有问题。如果是支付接口，则不能熔断。如果允许脏数据，则也OK。

如果实现平台化的熔断，像转转，那么只需要在方法上加注解就可以了。

熔断dao层，控制中心（注册中心）会往所有的service层发送指令。

MQ如果堆积了大量消息怎么办？

1、增加下游消费节点快。2、如果允许消息丢失，消费到100的时候挂了，但写到10000了，则直接把断点改成10000，以后消息直接从10000开始消费。



Linux下监控

df -h

free -g

vmstat

ifstat



